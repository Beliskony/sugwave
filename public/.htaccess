RewriteEngine On

# ğŸ”’ Forcer HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ğŸš€ Rediriger toutes les routes vers index.html (React Router DOM SPA)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [QSA,L]

# ğŸ“¦ Mettre en cache les fichiers statiques
<IfModule mod_headers.c>
    # /assets/* => Cache 1 an
    <FilesMatch "^assets/.*$">
        Header set Cache-Control "public, max-age=31536000, immutable"
    </FilesMatch>

    # fichiers JS, CSS, images, fonts => Cache 1 an
    <FilesMatch "\.(js|css|png|jpg|jpeg|webp|svg|woff2?)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
    </FilesMatch>

    # âŒ DÃ©sactiver le cache pour index.html (critique)
    <FilesMatch "^index\.html$">
        Header set Cache-Control "no-store, no-cache, must-revalidate"
    </FilesMatch>
</IfModule>
